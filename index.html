<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neighbourly - Local Services Marketplace</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- TailwindCSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Uber H3 (geospatial indexing) -->
    <script src="https://unpkg.com/h3-js@4.1.0/dist/h3-js.umd.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        'primary-dark': '#2563eb',
                        'primary-light': '#93c5fd',
                        secondary: '#10b981',
                        accent: '#f59e0b',
                        'dark-bg': '#0f172a',
                        'dark-card': '#1e293b',
                        'dark-text': '#f8fafc',
                        'dark-text-secondary': '#cbd5e1',
                        dark: {
                            bg: '#0f172a',
                            card: '#1e293b',
                            text: '#f8fafc',
                            'text-secondary': '#cbd5e1'
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.4s ease-out',
                        'slide-in': 'slideIn 0.4s ease-out',
                        'pulse': 'pulse 2s infinite'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
</head>
<body class="bg-dark-bg text-dark-text min-h-screen">
    
    <!-- Navigation -->
    <nav class="glass-card border-b border-white/10 sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3 cursor-pointer" onclick="showPage('landing')">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
                        <i class="fas fa-hands-helping text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Neighbourly</h1>
                        <p class="text-xs text-dark-text-secondary">Local Services Marketplace</p>
                    </div>
                </div>

                <!-- Nav Links -->
                <div id="nav-links" class="flex items-center space-x-4">
                    <div id="auth-nav">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- ===== LANDING PAGE ===== -->
        <div id="landing-page" class="page animate-fade-in">
            <!-- Hero Section -->
            <section class="relative rounded-2xl overflow-hidden mb-12">
                <div class="absolute inset-0 bg-gradient-to-br from-primary/20 via-dark-bg to-secondary/20"></div>
                <div class="relative glass-card rounded-2xl p-8 md:p-12">
                    <div class="text-center max-w-4xl mx-auto">
                        <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-primary to-secondary mb-6">
                            <i class="fas fa-hands-helping text-white text-3xl"></i>
                        </div>
                        <h1 class="text-4xl md:text-6xl font-bold mb-6">
                            Connect with <span class="gradient-text">Local Services</span>
                        </h1>
                        <p class="text-dark-text-secondary text-lg md:text-xl mb-8 leading-relaxed max-w-2xl mx-auto">
                            Discover trusted service providers in your community. Book appointments, get things done, and support your neighbors.
                        </p>
                        <div class="flex flex-wrap justify-center gap-4">
                            <button onclick="showPage('seeker-login')" 
                                    class="btn-primary text-white px-8 py-4 rounded-xl font-semibold text-lg">
                                <i class="fas fa-search mr-2"></i>Find Services
                            </button>
                            <button onclick="showPage('provider-login')" 
                                    class="btn-secondary text-white px-8 py-4 rounded-xl font-semibold text-lg">
                                <i class="fas fa-briefcase mr-2"></i>Offer Services
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold text-white text-center mb-10">How Neighbourly Works</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="glass-card rounded-xl p-8 hover-card">
                        <div class="flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 mb-6">
                            <i class="fas fa-user-plus text-primary text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-4">1. Create Account</h3>
                        <p class="text-dark-text-secondary">Sign up as a service seeker or provider. Complete your profile in minutes.</p>
                    </div>
                    
                    <div class="glass-card rounded-xl p-8 hover-card">
                        <div class="flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-br from-secondary/20 to-secondary/5 mb-6">
                            <i class="fas fa-search text-secondary text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-4">2. Find or List</h3>
                        <p class="text-dark-text-secondary">Browse available services or list your own with detailed descriptions and pricing.</p>
                    </div>
                    
                    <div class="glass-card rounded-xl p-8 hover-card">
                        <div class="flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-br from-accent/20 to-accent/5 mb-6">
                            <i class="fas fa-handshake text-accent text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-4">3. Connect & Book</h3>
                        <p class="text-dark-text-secondary">Book services directly, communicate with providers, and get things done.</p>
                    </div>
                </div>
            </section>

            <!-- Popular Categories -->
            <section class="mb-8">
                <h2 class="text-2xl font-bold text-white mb-6">Popular Service Categories</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="glass-card rounded-xl p-6 text-center hover-card">
                        <i class="fas fa-home text-primary text-2xl mb-3"></i>
                        <h4 class="font-semibold text-white">Home Services</h4>
                    </div>
                    <div class="glass-card rounded-xl p-6 text-center hover-card">
                        <i class="fas fa-bolt text-secondary text-2xl mb-3"></i>
                        <h4 class="font-semibold text-white">Electrical</h4>
                    </div>
                    <div class="glass-card rounded-xl p-6 text-center hover-card">
                        <i class="fas fa-tools text-accent text-2xl mb-3"></i>
                        <h4 class="font-semibold text-white">Repair</h4>
                    </div>
                    <div class="glass-card rounded-xl p-6 text-center hover-card">
                        <i class="fas fa-chalkboard-teacher text-primary text-2xl mb-3"></i>
                        <h4 class="font-semibold text-white">Tutoring</h4>
                    </div>
                </div>
            </section>
        </div>

        <!-- ===== SEEKER LOGIN PAGE ===== -->
        <div id="seeker-login-page" class="page hidden animate-fade-in">
            <div class="max-w-md mx-auto">
                <div class="glass-card rounded-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-primary to-primary/50 mb-4">
                            <i class="fas fa-search text-white text-2xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white mb-2">Welcome Back</h2>
                        <p class="text-dark-text-secondary">Find services that match your needs</p>
                    </div>

                    <div id="seeker-login-error" class="hidden bg-red-900/20 border border-red-800/30 text-red-300 px-4 py-3 rounded-xl mb-6">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span id="seeker-login-error-text"></span>
                    </div>

                    <form id="seeker-login-form">
                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Email Address</label>
                            <input type="email" 
                                   id="seeker-login-email" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="you@example.com"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Password</label>
                            <input type="password" 
                                   id="seeker-login-password" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="••••••••"
                                   required>
                        </div>

                        <button type="submit" 
                                class="btn-primary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-sign-in-alt mr-2"></i>Login to Find Services
                        </button>
                    </form>

                    <div class="text-center mt-6">
                        <p class="text-dark-text-secondary mb-2">New to Neighbourly?</p>
                        <button onclick="showPage('seeker-signup')" 
                                class="btn-secondary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-user-plus mr-2"></i>Create Seeker Account
                        </button>
                    </div>

                    <div class="text-center mt-6 pt-6 border-t border-white/10">
                        <button onclick="showPage('landing')" 
                                class="text-dark-text-secondary hover:text-white">
                            <i class="fas fa-arrow-left mr-2"></i>Back to Home
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== SEEKER SIGNUP PAGE ===== -->
        <div id="seeker-signup-page" class="page hidden animate-fade-in">
            <div class="max-w-md mx-auto">
                <div class="glass-card rounded-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-primary to-primary/50 mb-4">
                            <i class="fas fa-user-plus text-white text-2xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white mb-2">Join as Seeker</h2>
                        <p class="text-dark-text-secondary">Find and book local services</p>
                    </div>

                    <div id="seeker-signup-error" class="hidden bg-red-900/20 border border-red-800/30 text-red-300 px-4 py-3 rounded-xl mb-6">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span id="seeker-signup-error-text"></span>
                    </div>

                    <form id="seeker-signup-form">
                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Full Name</label>
                            <input type="text" 
                                   id="seeker-signup-name" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="John Doe"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Email Address</label>
                            <input type="email" 
                                   id="seeker-signup-email" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="you@example.com"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Password</label>
                            <input type="password" 
                                   id="seeker-signup-password" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="At least 6 characters"
                                   minlength="6"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Confirm Password</label>
                            <input type="password" 
                                   id="seeker-signup-confirm" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="Confirm password"
                                   minlength="6"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="flex items-start">
                                <input type="checkbox" 
                                       class="mt-1 mr-3 bg-dark-bg border-white/20 rounded focus:ring-primary focus:ring-2"
                                       required>
                                <span class="text-dark-text-secondary text-sm">
                                    I agree to the <a href="#" class="text-primary hover:underline">Terms</a> and 
                                    <a href="#" class="text-primary hover:underline">Privacy Policy</a>
                                </span>
                            </label>
                        </div>

                        <button type="submit" 
                                class="btn-primary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-user-plus mr-2"></i>Create Seeker Account
                        </button>
                    </form>

                    <div class="text-center mt-6">
                        <p class="text-dark-text-secondary mb-2">Already have an account?</p>
                        <button onclick="showPage('seeker-login')" 
                                class="btn-secondary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-sign-in-alt mr-2"></i>Login Instead
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PROVIDER LOGIN PAGE ===== -->
        <div id="provider-login-page" class="page hidden animate-fade-in">
            <div class="max-w-md mx-auto">
                <div class="glass-card rounded-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-secondary to-secondary/50 mb-4">
                            <i class="fas fa-briefcase text-white text-2xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white mb-2">Provider Login</h2>
                        <p class="text-dark-text-secondary">Manage your services and bookings</p>
                    </div>

                    <div id="provider-login-error" class="hidden bg-red-900/20 border border-red-800/30 text-red-300 px-4 py-3 rounded-xl mb-6">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span id="provider-login-error-text"></span>
                    </div>

                    <form id="provider-login-form">
                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Email Address</label>
                            <input type="email" 
                                   id="provider-login-email" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="provider@example.com"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Password</label>
                            <input type="password" 
                                   id="provider-login-password" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="••••••••"
                                   required>
                        </div>

                        <button type="submit" 
                                class="btn-primary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-sign-in-alt mr-2"></i>Login as Provider
                        </button>
                    </form>

                    <div class="text-center mt-6">
                        <p class="text-dark-text-secondary mb-2">New provider?</p>
                        <button onclick="showPage('provider-signup')" 
                                class="btn-secondary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-user-plus mr-2"></i>Register as Provider
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PROVIDER SIGNUP PAGE ===== -->
        <div id="provider-signup-page" class="page hidden animate-fade-in">
            <div class="max-w-md mx-auto">
                <div class="glass-card rounded-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-secondary to-secondary/50 mb-4">
                            <i class="fas fa-briefcase text-white text-2xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white mb-2">Join as Provider</h2>
                        <p class="text-dark-text-secondary">Offer services to your community</p>
                    </div>

                    <div id="provider-signup-error" class="hidden bg-red-900/20 border border-red-800/30 text-red-300 px-4 py-3 rounded-xl mb-6">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span id="provider-signup-error-text"></span>
                    </div>

                    <form id="provider-signup-form">
                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Full Name</label>
                            <input type="text" 
                                   id="provider-signup-name" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="John Doe"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Email Address</label>
                            <input type="email" 
                                   id="provider-signup-email" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="provider@example.com"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Password</label>
                            <input type="password" 
                                   id="provider-signup-password" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="At least 6 characters"
                                   minlength="6"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Confirm Password</label>
                            <input type="password" 
                                   id="provider-signup-confirm" 
                                   class="input-field w-full rounded-xl px-4 py-3 text-white"
                                   placeholder="Confirm password"
                                   minlength="6"
                                   required>
                        </div>

                        <div class="mb-6">
                            <label class="block text-dark-text-secondary mb-2">Service Category</label>
                            <select id="provider-category" 
                                    class="input-field w-full rounded-xl px-4 py-3 text-white"
                                    required>
                                <option value="">Select category</option>
                                <option value="Home Services">Home Services</option>
                                <option value="Electrical">Electrical</option>
                                <option value="Plumbing">Plumbing</option>
                                <option value="Cleaning">Cleaning</option>
                                <option value="Tutoring">Tutoring</option>
                                <option value="Delivery">Delivery</option>
                                <option value="Repair">Repair</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="mb-6">
                            <label class="flex items-start">
                                <input type="checkbox" 
                                       class="mt-1 mr-3 bg-dark-bg border-white/20 rounded focus:ring-primary focus:ring-2"
                                       required>
                                <span class="text-dark-text-secondary text-sm">
                                    I agree to the <a href="#" class="text-primary hover:underline">Terms</a> and 
                                    <a href="#" class="text-primary hover:underline">Privacy Policy</a>
                                </span>
                            </label>
                        </div>

                        <button type="submit" 
                                class="btn-primary w-full text-white py-3 rounded-xl font-semibold">
                            <i class="fas fa-user-plus mr-2"></i>Register as Provider
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- ===== SEEKER MARKETPLACE ===== -->
        <div id="seeker-marketplace-page" class="page hidden animate-fade-in">
            <!-- Header -->
            <div class="mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold text-white">Service Marketplace</h2>
                        <p class="text-dark-text-secondary">Find and book services from trusted providers</p>
                    </div>
                    <div class="flex flex-col md:flex-row items-start md:items-center space-y-3 md:space-y-0 md:space-x-4 w-full md:w-auto">
                        <input type="text" 
                               id="seeker-search" 
                               class="input-field rounded-xl px-4 py-3 text-white w-full md:w-64"
                               placeholder="Search services...">
                        <select id="seeker-category" 
                                class="input-field rounded-xl px-4 py-3 text-white">
                            <option value="">All Categories</option>
                        </select>

                        <!-- Location Filters (Uber H3) -->
                        <button id="use-my-location" type="button"
                                class="btn-secondary text-white px-4 py-3 rounded-xl font-semibold w-full md:w-auto">
                            <i class="fas fa-location-crosshairs mr-2"></i>Use My Location
                        </button>
                        <select id="seeker-radius" class="input-field rounded-xl px-4 py-3 text-white w-full md:w-auto">
                            <option value="">Any distance</option>
                            <option value="5">Within 5 km</option>
                            <option value="10">Within 10 km</option>
                            <option value="25">Within 25 km</option>
                        </select>
                    </div>
                </div>

                <!-- Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="total-services">0</div>
                            <div class="text-dark-text-secondary text-sm">Available Services</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="active-providers">0</div>
                            <div class="text-dark-text-secondary text-sm">Active Providers</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="avg-price">PKR 0</div>
                            <div class="text-dark-text-secondary text-sm">Average Price</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="total-bookings">0</div>
                            <div class="text-dark-text-secondary text-sm">Total Bookings</div>
                        </div>
                    </div>
                </div>


                <!-- Map (shows services + your location) -->
                <div id="seeker-map-wrap" class="hidden mb-6 bg-white/5 border border-white/10 rounded-2xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-white font-bold"><i class="fas fa-map-marked-alt mr-2 text-primary"></i>Nearby Services Map</h3>
                        <button id="seeker-map-hide" class="text-gray-300 hover:text-white text-sm px-3 py-1 rounded-lg bg-black/20 border border-white/10">Hide</button>
                    </div>
                    <div id="seeker-map" style="height: 320px; border-radius: 16px; overflow: hidden;"></div>
                    <p class="text-gray-400 text-xs mt-3">Showing your location and nearby providers/services inside the selected radius.</p>
                </div>

                <!-- Services Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="seeker-services-grid">
                    <!-- Services will be loaded here -->
                </div>

                <!-- No Results -->
                <div id="seeker-no-results" class="hidden text-center py-12">
                    <i class="fas fa-search text-4xl text-dark-text-secondary mb-4"></i>
                    <p class="text-dark-text-secondary">No services found matching your criteria</p>
                </div>
            </div>
        </div>

        <!-- ===== SEEKER DASHBOARD ===== -->
        <div id="seeker-dashboard-page" class="page hidden animate-slide-in">
            <!-- Header -->
            <div class="mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-white" id="seeker-greeting">Welcome</h2>
                        <p class="text-dark-text-secondary">Manage your bookings and find new services</p>
                    </div>
                    <div class="flex space-x-3 mt-4 md:mt-0">
                        <button onclick="showPage('seeker-marketplace')" 
                                class="btn-primary text-white px-4 py-2 rounded-xl font-semibold">
                            <i class="fas fa-search mr-2"></i>Browse Services
                        </button>
                        <button onclick="showPage('chat')" 
                                class="btn-secondary text-white px-4 py-2 rounded-xl font-semibold">
                            <i class="fas fa-comments mr-2"></i>Messages
                        </button>
                        <button onclick="logout()" 
                                class="btn-secondary text-white px-4 py-2 rounded-xl font-semibold">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="seeker-total-bookings">0</div>
                            <div class="text-dark-text-secondary text-sm">Total Bookings</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="seeker-pending">0</div>
                            <div class="text-dark-text-secondary text-sm">Pending</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="seeker-approved">0</div>
                            <div class="text-dark-text-secondary text-sm">Approved</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="seeker-completed">0</div>
                            <div class="text-dark-text-secondary text-sm">Completed</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="mb-8">
                <h3 class="text-xl font-bold text-white mb-4">Quick Actions</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="showPage('seeker-marketplace')" 
                            class="glass-card rounded-xl p-6 text-left hover-card">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mr-4">
                                <i class="fas fa-search text-primary text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">Browse Services</h4>
                                <p class="text-dark-text-secondary text-sm">Find new services</p>
                            </div>
                        </div>
                        <p class="text-dark-text-secondary text-sm">Explore available services in marketplace</p>
                    </button>
                    
                    <button onclick="viewAllBookings()" 
                            class="glass-card rounded-xl p-6 text-left hover-card">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-secondary/20 to-secondary/5 flex items-center justify-center mr-4">
                                <i class="fas fa-calendar-check text-secondary text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">My Bookings</h4>
                                <p class="text-dark-text-secondary text-sm">View all bookings</p>
                            </div>
                        </div>
                        <p class="text-dark-text-secondary text-sm">Check status of your bookings</p>
                    </button>
                    
                    <button onclick="viewProfile()" 
                            class="glass-card rounded-xl p-6 text-left hover-card">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-accent/20 to-accent/5 flex items-center justify-center mr-4">
                                <i class="fas fa-user text-accent text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">My Profile</h4>
                                <p class="text-dark-text-secondary text-sm">Update information</p>
                            </div>
                        </div>
                        <p class="text-dark-text-secondary text-sm">View and edit your profile</p>
                    </button>
                </div>
            </div>

            <!-- Recent Bookings -->
            <div>
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">Recent Bookings</h3>
                    <button onclick="viewAllBookings()" 
                            class="text-primary hover:text-primary-light font-semibold text-sm">
                        View All
                    </button>
                </div>
                <div class="glass-card rounded-xl overflow-hidden">
                    <div id="seeker-recent-bookings">
                        <!-- Bookings will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PROVIDER DASHBOARD ===== -->
        <div id="provider-dashboard-page" class="page hidden animate-slide-in">
            <!-- Header -->
            <div class="mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-white" id="provider-greeting">Provider Dashboard</h2>
                        <p class="text-dark-text-secondary">Manage your services and bookings</p>
                    </div>
                    <div class="flex space-x-3 mt-4 md:mt-0">
                        <button onclick="showCreateServiceModal()" 
                                class="btn-primary text-white px-4 py-2 rounded-xl font-semibold">
                            <i class="fas fa-plus mr-2"></i>Create Service
                        </button>
                        <button onclick="showPage('chat')" 
                                class="btn-secondary text-white px-4 py-2 rounded-xl font-semibold">
                            <i class="fas fa-comments mr-2"></i>Messages
                        </button>
                        <button onclick="logout()" 
                                class="btn-secondary text-white px-4 py-2 rounded-xl font-semibold">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="provider-active-services">0</div>
                            <div class="text-dark-text-secondary text-sm">Active Services</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="provider-total-bookings">0</div>
                            <div class="text-dark-text-secondary text-sm">Total Bookings</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="provider-pending">0</div>
                            <div class="text-dark-text-secondary text-sm">Pending</div>
                        </div>
                    </div>
                    <div class="stat-card rounded-xl p-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white mb-1" id="provider-revenue">PKR 0</div>
                            <div class="text-dark-text-secondary text-sm">Revenue</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="mb-8">
                <h3 class="text-xl font-bold text-white mb-4">Quick Actions</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="showCreateServiceModal()" 
                            class="glass-card rounded-xl p-6 text-left hover-card">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mr-4">
                                <i class="fas fa-plus text-primary text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">Create Service</h4>
                                <p class="text-dark-text-secondary text-sm">Add new service</p>
                            </div>
                        </div>
                        <p class="text-dark-text-secondary text-sm">List a new service for seekers to book</p>
                    </button>
                    
                    <button onclick="manageServices()" 
                            class="glass-card rounded-xl p-6 text-left hover-card">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-secondary/20 to-secondary/5 flex items-center justify-center mr-4">
                                <i class="fas fa-cog text-secondary text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">Manage Services</h4>
                                <p class="text-dark-text-secondary text-sm">Edit your services</p>
                            </div>
                        </div>
                        <p class="text-dark-text-secondary text-sm">Update or delete your listed services</p>
                    </button>
                    
                    <button onclick="manageBookings()" 
                            class="glass-card rounded-xl p-6 text-left hover-card">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-accent/20 to-accent/5 flex items-center justify-center mr-4">
                                <i class="fas fa-calendar-check text-accent text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">Manage Bookings</h4>
                                <p class="text-dark-text-secondary text-sm">View booking requests</p>
                            </div>
                        </div>
                        <p class="text-dark-text-secondary text-sm">Approve or reject booking requests</p>
                    </button>
                </div>
            </div>

            <!-- Recent Booking Requests -->
            <div>
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">Recent Booking Requests</h3>
                    <button onclick="manageBookings()" 
                            class="text-primary hover:text-primary-light font-semibold text-sm">
                        View All
                    </button>
                </div>
                <div class="glass-card rounded-xl overflow-hidden">
                    <div id="provider-recent-bookings">
                        <!-- Bookings will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== SERVICE DETAIL PAGE ===== -->
        <div id="service-detail-page" class="page hidden animate-fade-in">
            <div class="glass-card rounded-2xl p-8">
                <button onclick="goBackFromDetail()" 
                        class="text-dark-text-secondary hover:text-white mb-6">
                    <i class="fas fa-arrow-left mr-2"></i>Back
                </button>
                <div id="service-detail-content">
                    <!-- Service details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- ===== CHAT PAGE (Provider <-> Seeker) ===== -->
        <div id="chat-page" class="page hidden animate-fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-white">Messages</h2>
                    <p class="text-dark-text-secondary">Chat with your providers/seekers</p>
                </div>
                <div class="flex gap-3">
                    <button onclick="goBackFromChat()" class="btn-secondary text-white px-4 py-2 rounded-xl font-semibold">
                        <i class="fas fa-arrow-left mr-2"></i>Back
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Conversation List -->
                <div class="lg:col-span-4 glass-card rounded-2xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-white">Conversations</h3>
                        <button onclick="refreshConversations()" class="text-primary hover:text-primary-light text-sm font-semibold">
                            <i class="fas fa-rotate mr-1"></i>Refresh
                        </button>
                    </div>
                    <div id="chat-conversations" class="space-y-2 max-h-[60vh] overflow-auto pr-1">
                        <!-- Conversations will load here -->
                    </div>
                    <div id="chat-no-conversations" class="hidden text-center py-8 text-dark-text-secondary">
                        <i class="fas fa-comments text-3xl mb-3"></i>
                        <p>No conversations yet.</p>
                        <p class="text-xs mt-2">Start by clicking Chat on a service/provider.</p>
                    </div>
                </div>

                <!-- Chat Window -->
                <div class="lg:col-span-8 glass-card rounded-2xl p-4 flex flex-col">
                    <div class="flex items-center justify-between border-b border-white/10 pb-3 mb-3">
                        <div>
                            <h3 class="text-lg font-bold text-white" id="chat-title">Select a conversation</h3>
                            <p class="text-dark-text-secondary text-sm" id="chat-subtitle">Your messages will appear here</p>
                        </div>
                    </div>

                    <div id="chat-messages" class="flex-1 overflow-auto space-y-3 pr-1 py-2 min-h-[320px]">
                        <!-- Messages will load here -->
                    </div>

                    <form id="chat-form" class="flex gap-3 pt-3 border-t border-white/10">
                        <input id="chat-input" type="text" class="input-field flex-1 rounded-xl px-4 py-3 text-white" placeholder="Type a message..." autocomplete="off" />
                        <button type="submit" class="btn-primary text-white px-5 py-3 rounded-xl font-semibold">
                            <i class="fas fa-paper-plane mr-2"></i>Send
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- ===== MODALS ===== -->
    
    <!-- Create Service Modal -->
    <div id="create-service-modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
        <div class="glass-card rounded-2xl p-8 max-w-lg w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-white">Create New Service</h3>
                <button onclick="hideModal('create-service-modal')" 
                        class="text-dark-text-secondary hover:text-white text-2xl">
                    &times;
                </button>
            </div>

            <div id="create-service-error" class="hidden bg-red-900/20 border border-red-800/30 text-red-300 px-4 py-3 rounded-xl mb-6">
                <span></span>
            </div>

            <form id="create-service-form">
                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Service Title</label>
                    <input type="text" 
                           id="service-title" 
                           class="input-field w-full rounded-xl px-4 py-3 text-white"
                           placeholder="e.g., Professional AC Repair"
                           required>
                </div>

                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Category</label>
                    <select id="service-category" 
                            class="input-field w-full rounded-xl px-4 py-3 text-white"
                            required>
                        <option value="">Select Category</option>
                        <option value="Home Services">Home Services</option>
                        <option value="Electrical">Electrical</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Cleaning">Cleaning</option>
                        <option value="Tutoring">Tutoring</option>
                        <option value="Delivery">Delivery</option>
                        <option value="Repair">Repair</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Description</label>
                    <textarea id="service-description" 
                              class="input-field w-full rounded-xl px-4 py-3 text-white h-32"
                              placeholder="Describe your service in detail..."
                              required></textarea>
                </div>

                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Price (PKR)</label>
                    <input type="number" 
                           id="service-price" 
                           class="input-field w-full rounded-xl px-4 py-3 text-white"
                           placeholder="e.g., 1500"
                           min="0"
                           step="0.01"
                           required>
                </div>

                <!-- Location (for H3 radius discovery) -->
                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Service Location (Latitude / Longitude)</label>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <input type="number" id="service-lat" class="input-field w-full rounded-xl px-4 py-3 text-white" placeholder="Latitude (e.g., 24.8607)" step="0.000001">
                        <input type="number" id="service-lng" class="input-field w-full rounded-xl px-4 py-3 text-white" placeholder="Longitude (e.g., 67.0011)" step="0.000001">
                    </div>
                    <button type="button" id="service-use-location" class="mt-3 btn-secondary text-white px-4 py-2 rounded-xl font-semibold">
                        <i class="fas fa-location-crosshairs mr-2"></i>Use My Current Location
                    </button>
                    <p class="text-dark-text-secondary text-xs mt-2">Optional, but recommended: it enables seekers to find your service within 5/10/25 km using Uber H3.</p>
                </div>

                <div class="flex justify-end space-x-3 mt-8">
                    <button type="button" 
                            onclick="hideModal('create-service-modal')" 
                            class="btn-secondary text-white px-6 py-3 rounded-xl font-semibold">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                        Create Service
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Book Service Modal -->
    <div id="book-service-modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
        <div class="glass-card rounded-2xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-white">Book Service</h3>
                <button onclick="hideModal('book-service-modal')" 
                        class="text-dark-text-secondary hover:text-white text-2xl">
                    &times;
                </button>
            </div>

            <div id="book-service-error" class="hidden bg-red-900/20 border border-red-800/30 text-red-300 px-4 py-3 rounded-xl mb-6">
                <span></span>
            </div>

            <form id="book-service-form">
                <input type="hidden" id="book-service-id">
                
                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Service Title</label>
                    <div id="book-service-title" class="text-white font-semibold input-field rounded-xl px-4 py-3"></div>
                </div>

                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Provider</label>
                    <div id="book-service-provider" class="text-white input-field rounded-xl px-4 py-3"></div>
                </div>

                <div class="mb-4">
                    <label class="block text-dark-text-secondary mb-2">Select Date & Time</label>
                    <input type="datetime-local" 
                           id="book-time" 
                           class="input-field w-full rounded-xl px-4 py-3 text-white"
                           required>
                </div>

                <div class="mb-6">
                    <label class="block text-dark-text-secondary mb-2">Special Instructions (Optional)</label>
                    <textarea id="book-notes" 
                              class="input-field w-full rounded-xl px-4 py-3 text-white h-24"
                              placeholder="Any special requests..."></textarea>
                </div>

                <div class="flex justify-end space-x-3">
                    <button type="button" 
                            onclick="hideModal('book-service-modal')" 
                            class="btn-secondary text-white px-6 py-3 rounded-xl font-semibold">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                        Confirm Booking
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="spinner mx-auto mb-4"></div>
            <p class="text-white">Loading...</p>
        </div>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="main.js"></script>
</body>
</html>